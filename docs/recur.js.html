<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: recur.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: recur.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/* @module traversal */

/**
 * @class Recursive traversal callback for a given node at a given depth.
 * @author Ryan Sandor Richards
 * @param {Object} parent Parent node of the recur.
 * @param {Number} depth Depth of the parent node.
 * @return {TreeTraversal~recur} The recur method for the node and depth.
 */
function Recur(traversal, parent, depth) {
  /**
   * Recurs further into the traversal given the next node.
   * @callback recur
   * @param {Object} node Node on which to continue the traversal.
   * @param {Number} [givenDepth] Traversal depth override.
   */
  var recur = function(node, givenDepth) {
    if (!givenDepth) {
      givenDepth = depth + 1;
    }
    return traversal.run(node, givenDepth);
  };

  recur._options = {
    autoTraverse: true,
    reduce: function(a, b) {
      return a + b;
    },
    reduceInitial: '',
    depth: depth
  };

  for (var name in Recur.prototype) {
    recur[name] = Recur.prototype[name];
  }

  return recur;
}

/**
 * Stop automatic traversal for names defined with `TreeTraversal.preorder`
 * and `TreeTraversal.postorder`.
 */
Recur.prototype.stop = function() {
  this._options.autoTraverse = false;
};

/**
 * Sets the reduce function for `.each`.
 * @param {Function} fn Reduce function.
 */
Recur.prototype.setReduce = function(fn) {
  this._options.reduce = fn;
};

/**
 * Sets initial value for `.each` reduce.
 * @param initial Intial value.
 */
Recur.prototype.setReduceInitial = function(initial) {
  this._options.reduceInitial = initial;
};

/**
 * Recurs further in the traversal for each node in a given array.
 * @param {Array} list Array of nodes to traverse.
 * @param {Number} [givenDepth] Traversal depth override.
 */
Recur.prototype.each = function(list, givenDepth) {
  if (!givenDepth) {
    givenDepth = this._options.depth + 1;
  }

  var recur = this;
  return list.map(function (node) {
    return recur(node, givenDepth);
  }).reduce(function (left, right) {
    return recur._options.reduce(left, right);
  }, "");
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Recur.html">Recur</a></li><li><a href="TreeTraversal.html">TreeTraversal</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addToSet">addToSet</a></li><li><a href="global.html#allToSet">allToSet</a></li><li><a href="global.html#traverse">traverse</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a> on Wed Mar 25 2015 22:39:35 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
